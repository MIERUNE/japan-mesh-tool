# japan-mesh-tool

日本の標準地域メッシュを生成するツール

## 実行環境
- Python3.x系（3.8で開発してますが3系なら動くと思います）
- 組み込みモジュールのみ使用しているため、ライブラリのインストールは不要です

## 出力形式
GeoJsonのFeature単位行区切り（.geojsonlないしGeoJsonSeq形式）で出力

mesh_5.geojsonlから抜粋した出力例
```
{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[142.26875, 44.01041666666667], [142.26875, 44.0125], [142.271875, 44.0125], [142.271875, 44.01041666666667], [142.26875, 44.01041666666667]]]}, "properties": {"code": "664202110110"}}
{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[142.271875, 44.01041666666667], [142.271875, 44.0125], [142.275, 44.0125], [142.275, 44.01041666666667], [142.271875, 44.01041666666667]]]}, "properties": {"code": "664202110111"}}
{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[142.275, 44.01041666666667], [142.275, 44.0125], [142.278125, 44.0125], [142.278125, 44.01041666666667], [142.275, 44.01041666666667]]]}, "properties": {"code": "664202120010"}}
{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[142.278125, 44.01041666666667], [142.278125, 44.0125], [142.28125, 44.0125], [142.28125, 44.01041666666667], [142.278125, 44.01041666666667]]]}, "properties": {"code": "664202120011"}}
{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[142.28125, 44.01041666666667], [142.28125, 44.0125], [142.284375, 44.0125], [142.284375, 44.01041666666667], [142.28125, 44.01041666666667]]]}, "properties": {"code": "664202120110"}}
{"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[142.284375, 44.01041666666667], [142.284375, 44.0125], [142.2875, 44.0125], [142.2875, 44.01041666666667], [142.284375, 44.01041666666667]]]}, "properties": {"code": "664202120111"}}
```

## 使い方

```
python main.py <meshnum:メッシュ次数> <-e:領域指定、"左下経緯度 右上経緯度"形式で指定> <-d:保存先>
```

- 領域指定(-e),保存先(-d)はオプションです
    - 保存先を指定しない場合スクリプト実行ディレクトリに保存します
    - 領域を指定しない場合最大範囲で生成します。3次以上はメッシュ数が膨大なので、大きな領域にすべきではありません


実行例（出力ファイルはmesh_5.geojsonl）
```
python main.py 5 -e 142.2,44.0 142.3,44.5 -d ./
```

または、4次メッシュ以上の場合は別称で指定する事が出来ます
```
python main.py 250 -e 142.2,44.0 142.3,44.5 -d ./
```

## 対応メッシュ次数

|  次数  |  別称  |  詳細  |  メッシュコード  |
| ---- | ---- | ---- | ---- |
|  1  |  -  |  80kmメッシュ |  4桁  |
|  2  |  -  |  10kmメッシュ |  6桁  |
|  3  |  -  |  1kmメッシュ  |  8桁  |
|  4  |  500  |  500mメッシュ |  10桁  |
|  5  |  250  |  250mメッシュ |  12桁  |
|  6  |  125  |  125mメッシュ |  14桁  |
|  7  |  50  |  50mメッシュ  |  14桁  |

参考1: https://www.stat.go.jp/data/mesh/pdf/gaiyo1.pdf

参考2: https://www.e-stat.go.jp/pdf/gis/chiiki_mesh_toukei.pdf